  <link rel="stylesheet" th:href="@{/css/admin/cs/faq/list.css}">
  <link rel="stylesheet" th:href="@{/css/basic.css}">
<body>
<header th:replace="layout/admin/header.html"></header>
<main>
  <aside th:replace="layout/admin/aside.html"></aside>
  <section id="admin-product-list" class="container">
    <div id="search_input">
      <nav class="faq-nav">
        <h3>자주묻는질문 목록</h3>
        <p>HOME > 고객센터 > <strong>자주묻는질문</strong></p>
      </nav>
      <form
              action="@{'/article/' + ${cate.cateGroup} + '/' + ${cate.cateName}}"
              class="search"
      >
        <input type="hidden" name="content" value="list" />
        <input type="hidden" name="cateNo"  />
        <!-- - 공지사항 유형 선택할 때마다 목록 출력, 갱신 됨 -->
        <select class="faqCate" name="faqCate" onchange="firstOption()">
          <option>1차선택</option>
          <option value="user">회원</option>
          <option value="coupon">쿠폰/이벤트</option>
          <option value="order">주문/결제</option>
          <option value="delivery">배송</option>
          <option value="cancel">취소/반품/환불</option>
          <option value="travel">여행/숙박/항공</option>
          <option value="safe">안전결제</option>
        </select>
        <select class="faqType" name="faqType" onchange="redirectToCateType()">

          <option>2차선택</option>
          <option value="regi">가입</option>
          <option value="leave">탈퇴</option>
          <option value="info">회원정보</option>
          <option value="login">로그인</option>
        </select>
      </form>
    </div>
    <article>
      <table style="width: 100%">
        <tr>
          <th style="width: 5%"><input type="checkbox" id="selectAll" /></th>
          <th style="width: 5%">번호</th>
          <th>1차유형</th>
          <th>2차유형</th>
          <th>제목</th>
          <th>조회</th>
          <th>날짜</th>
          <th>관리</th>
        </tr>
        <!-- <th:block th:if="${pageResponseDTO.getDtoList().size() == 0}" >
                                     <tr>
                                         <td colspan="7" class="td_first"><a  th:href="@{/article/list(pg=1)}">일치하는 내용이 없습니다.</a></td>
                                     </tr>
                                  </th:block> -->

        <tr>
          <td><input type="checkbox" /></td>
          <td>1</td>
          <td>회원</td>
          <td>가입</td>
          <td style="text-align: left">삭제 수정 버튼이 될까요 되길 기도해 ~</td>
          <td>120</td>
          <td>00.00.00</td>
          <td>
            <button type="button" class="delete-btn" data-id="1">[삭제]</button>
            <button type="button" class="modify-btn" data-id="1">[수정]</button>
          </td>
        </tr>
        <tr>
          <td><input type="checkbox" /></td>
          <td>1</td>
          <td>회원</td>
          <td>가입</td>
          <td style="text-align: left">
            본인 인증 시 이미 가입되어 있는 정보라고 나옵니다.
          </td>
          <td>120</td>
          <td>00.00.00</td>
          <td>
            <div>[삭제]</div>
            <div>[수정]</div>
          </td>
        </tr>
        <tr>
          <td><input type="checkbox" /></td>
          <td>1</td>
          <td>회원</td>
          <td>가입</td>
          <td style="text-align: left">아이디를 여러 개 사용할 수 있나요?</td>
          <td>120</td>
          <td>00.00.00</td>
          <td>
            <div>[삭제]</div>
            <div>[수정]</div>
          </td>
        </tr>
        <tr>
          <td><input type="checkbox" /></td>
          <td>1</td>
          <td>회원</td>
          <td>가입</td>
          <td style="text-align: left">회원 종류 및 혜택 안내</td>
          <td>120</td>
          <td>00.00.00</td>
          <td>
            <div>[삭제]</div>
            <div>[수정]</div>
          </td>
        </tr>
        <tr>
          <td><input type="checkbox" /></td>
          <td>1</td>
          <td>회원</td>
          <td>탈퇴</td>
          <td style="text-align: left">회원탈퇴는 어떻게 하나요?</td>
          <td>120</td>
          <td>00.00.00</td>
          <td>
            <div>[삭제]</div>
            <div>[수정]</div>
          </td>
        </tr>
        <tr>
          <td><input type="checkbox" /></td>
          <td>1</td>
          <td>회원</td>
          <td>탈퇴</td>
          <td style="text-align: left">개인회원과 법인회원에 차이가 있나요?</td>
          <td>120</td>
          <td>00.00.00</td>
          <td>
            <div>[삭제]</div>
            <div>[수정]</div>
          </td>
        </tr>
        <tr>
          <td><input type="checkbox" /></td>
          <td>1</td>
          <td>회원</td>
          <td>가입</td>
          <td style="text-align: left">개인회원과 법인회원에 차이가 있나요?</td>
          <td>120</td>
          <td>00.00.00</td>
          <td>
            <div>[삭제]</div>
            <div>[수정]</div>
          </td>
        </tr>
        <!-- 한번 반복할때마다 pageStartNum을 1씩 차감 -->
      </table>
    </article>

    <div class="button-group">
      <button class="button--delete">선택삭제</button>
      <a href="/admin/cs/faq/write" class="button--write">작성하기</a> <!-- 작성 페이지로 이동 -->
    </div>

    <!-- 페이지 네비게이션 -->
    <div class="paging">
      <a href="#" class="prev">이전</a>
      <a href="#">1</a>
      <a href="#">2</a>
      <a href="#">3</a>
      <!--페이지 이전 다음 글자 누를 수 있게-->
      <a href="#" class="next">다음</a>
    </div>
  </section>
</main>
<footer th:replace="layout/admin/footer.html"></footer>
</body>

  <script>
    // 1차 선택에 따라 2차 선택 항목을 제공하는 객체
    const secondOptions = {
      "user": [
        {value: "regi", text: "가입"},
        {value: "leave", text: "탈퇴"},
        {value: "info", text: "회원정보"},
        {value: "login", text: "로그인"}
      ],
      "coupon": [
        {value: "lpoint", text: "L.POINT"},
        {value: "coupon", text: "쿠폰"},
        {value: "event", text: "이벤트/경품"},
        {value: "attendance", text: "출석체크"},
        {value: "gift", text: "사은품"}
      ],
      "order": [
        {value: "orderMethod", text: "주문방법"},
        {value: "orderChange", text: "주문변경"},
        {value: "paymentMethod", text: "결제방법"},
        {value: "easyPayment", text: "간편결제"},
        {value: "giftReceive", text: "선물받기"},
        {value: "mobileGift", text: "모바일상품권"},
        {value: "phonePayment", text: "휴대폰결제"},
        {value: "applePay", text: "애플페이"}
      ],
      "delivery": [
        {value: "delivery", text: "배송"},
        {value: "deliveryFee", text: "배송비"},
        {value: "deliveryMethod", text: "배송방법"},
        {value: "deliverySchedule", text: "배송일정"},
        {value: "deliveryAddress", text: "배송지"},
        {value: "todayArrival", text: "오늘도착"},
        {value: "overseas", text: "해외직구"},
        {value: "notReceived", text: "미수령신고"},
        {value: "recipient", text: "수취인"},
        {value: "purchaseConfirm", text: "구매확정"}
      ],
      "cancel": [
        {value: "orderCancel", text: "주문취소"},
        {value: "refundMethod", text: "환불방법"},
        {value: "cardRefund", text: "카드환불"},
        {value: "refundSchedule", text: "환불일정"},
        {value: "phoneRefund", text: "휴대폰결제환불"}
      ],
      "travel": [
        {value: "ecoupon", text: "e쿠폰"},
        {value: "flight", text: "항공"},
        {value: "accommodation", text: "숙박"},
        {value: "ticket", text: "티켓"}
      ],
      "safe": [
        {value: "policyViolation", text: "법령 및 정책위반 상품"},
        {value: "ipViolation", text: "지적재산권침해"},
        {value: "serviceViolation", text: "서비스 이용규칙 위반"},
        {value: "adViolation", text: "표시광고"}
      ]
    };

    // 1차 선택에 따라 2차 선택을 동적으로 변경하는 함수
    document.querySelector(".faqCate").addEventListener("change", function() {
      const selectedValue = this.value;
      const select2 = document.querySelector(".faqType");
      select2.innerHTML = '<option value="" selected disabled hidden>2차선택</option>'; // 초기화

      if (secondOptions[selectedValue]) {
        secondOptions[selectedValue].forEach(option => {
          const newOption = document.createElement("option");
          newOption.value = option.value;
          newOption.text = option.text;
          select2.appendChild(newOption);
        });
      }
    });

    // 삭제 버튼 클릭 이벤트
    document.querySelectorAll('.delete-btn').forEach(button => {
      button.addEventListener('click', function() {
        const faqId = this.getAttribute('data-id'); // FAQ ID 가져오기
        const confirmDelete = confirm('정말로 이 FAQ를 삭제하시겠습니까?');

        if (confirmDelete) {
          // 서버로 삭제 요청 보내기 (AJAX 또는 폼 제출 방식)
          fetch(`/admin/cs/faq/delete/${faqId}`, {
            method: 'DELETE'
          })
                  .then(response => {
                    if (response.ok) {
                      alert('삭제되었습니다.');
                      location.reload();  // 페이지 새로고침
                    } else {
                      alert('삭제에 실패했습니다. 다시 시도해주세요.');
                    }
                  })
                  .catch(error => {
                    console.error('Error:', error);
                    alert('오류가 발생했습니다.');
                  });
        }
      });
    });

    // 수정 버튼 클릭 이벤트
    document.querySelectorAll('.modify-btn').forEach(button => {
      button.addEventListener('click', function() {
        const faqId = this.getAttribute('data-id');
        window.location.href = `/admin/cs/faq/modify/${faqId}`; // 수정 페이지로 이동
      });
    });
  </script>
